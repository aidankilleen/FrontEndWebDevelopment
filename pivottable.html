<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    


    <script>
        let data = [
  {
    "date": "01/01/2021",
    "user": "Aidan",
    "colour": "red",
    "quantity": 10
  },
  {
    "date": "10/01/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 12
  },
  {
    "date": "01/11/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 14
  },
  {
    "date": "15/08/2021",
    "user": "Carol",
    "colour": "green",
    "quantity": 15
  },
  {
    "date": "19/01/2021",
    "user": "Dan",
    "colour": "red",
    "quantity": 16
  },
  {
    "date": "20/03/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 20
  },
  {
    "date": "04/05/2021",
    "user": "Dan",
    "colour": "green",
    "quantity": 1
  },
  {
    "date": "05/04/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 20
  },
  {
    "date": "07/09/2021",
    "user": "Dan",
    "colour": "red",
    "quantity": 9
  },
  {
    "date": "03/02/0201",
    "user": "Dan",
    "colour": "green",
    "quantity": 14
  },
  {
    "date": "23/08/2021",
    "user": "Dan",
    "colour": "red",
    "quantity": 23
  },
  {
    "date": "23/12/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 21
  },
  {
    "date": "29/12/2021",
    "user": "Alice",
    "colour": "green",
    "quantity": 20
  },
  {
    "date": "15/03/2021",
    "user": "Bob",
    "colour": "orange",
    "quantity": 17
  },
  {
    "date": "16/04/2021",
    "user": "Alice",
    "colour": "green",
    "quantity": 20
  },
  {
    "date": "25/10/2021",
    "user": "Alice",
    "colour": "red",
    "quantity": 28
  },
  {
    "date": "10/10/2021",
    "user": "Alice",
    "colour": "red",
    "quantity": 11
  },
  {
    "date": "05/11/2021",
    "user": "Dan",
    "colour": "green",
    "quantity": 10
  },
  {
    "date": "09/11/2021",
    "user": "Carol",
    "colour": "orange",
    "quantity": 9
  },
  {
    "date": "02/01/2021",
    "user": "Carol",
    "colour": "blue",
    "quantity": 10
  },
  {
    "date": "11/01/2021",
    "user": "Bob",
    "colour": "orange",
    "quantity": 12
  },
  {
    "date": "02/11/2021",
    "user": "Bob",
    "colour": "orange",
    "quantity": 14
  },
  {
    "date": "16/08/2021",
    "user": "Alice",
    "colour": "orange",
    "quantity": 15
  },
  {
    "date": "20/01/2021",
    "user": "Dan",
    "colour": "blue",
    "quantity": 16
  },
  {
    "date": "21/03/2021",
    "user": "Carol",
    "colour": "blue",
    "quantity": 20
  },
  {
    "date": "05/05/2021",
    "user": "Alice",
    "colour": "red",
    "quantity": 1
  },
  {
    "date": "06/04/2021",
    "user": "Carol",
    "colour": "red",
    "quantity": 20
  },
  {
    "date": "08/09/2021",
    "user": "Carol",
    "colour": "red",
    "quantity": 9
  },
  {
    "date": "04/02/0201",
    "user": "Bob",
    "colour": "orange",
    "quantity": 14
  },
  {
    "date": "24/08/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 23
  },
  {
    "date": "24/12/2021",
    "user": "Dan",
    "colour": "red",
    "quantity": 21
  },
  {
    "date": "30/12/2021",
    "user": "Alice",
    "colour": "green",
    "quantity": 20
  },
  {
    "date": "16/03/2021",
    "user": "Dan",
    "colour": "blue",
    "quantity": 17
  },
  {
    "date": "17/04/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 20
  },
  {
    "date": "26/10/2021",
    "user": "Alice",
    "colour": "green",
    "quantity": 28
  },
  {
    "date": "11/10/2021",
    "user": "Alice",
    "colour": "green",
    "quantity": 11
  },
  {
    "date": "06/11/2021",
    "user": "Alice",
    "colour": "red",
    "quantity": 10
  },
  {
    "date": "10/11/2021",
    "user": "Carol",
    "colour": "green",
    "quantity": 9
  },
  {
    "date": "03/01/2021",
    "user": "Alice",
    "colour": "red",
    "quantity": 10
  },
  {
    "date": "12/01/2021",
    "user": "Carol",
    "colour": "orange",
    "quantity": 12
  },
  {
    "date": "03/11/2021",
    "user": "Dan",
    "colour": "green",
    "quantity": 14
  },
  {
    "date": "17/08/2021",
    "user": "Alice",
    "colour": "green",
    "quantity": 15
  },
  {
    "date": "21/01/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 16
  },
  {
    "date": "22/03/2021",
    "user": "Carol",
    "colour": "green",
    "quantity": 20
  },
  {
    "date": "06/05/2021",
    "user": "Dan",
    "colour": "orange",
    "quantity": 1
  },
  {
    "date": "07/04/2021",
    "user": "Carol",
    "colour": "orange",
    "quantity": 20
  },
  {
    "date": "09/09/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 9
  },
  {
    "date": "05/02/0201",
    "user": "Carol",
    "colour": "blue",
    "quantity": 14
  },
  {
    "date": "25/08/2021",
    "user": "Carol",
    "colour": "red",
    "quantity": 23
  },
  {
    "date": "25/12/2021",
    "user": "Alice",
    "colour": "blue",
    "quantity": 21
  },
  {
    "date": "31/12/2021",
    "user": "Dan",
    "colour": "red",
    "quantity": 20
  },
  {
    "date": "17/03/2021",
    "user": "Alice",
    "colour": "green",
    "quantity": 17
  },
  {
    "date": "18/04/2021",
    "user": "Dan",
    "colour": "red",
    "quantity": 20
  },
  {
    "date": "27/10/2021",
    "user": "Alice",
    "colour": "red",
    "quantity": 28
  },
  {
    "date": "12/10/2021",
    "user": "Dan",
    "colour": "red",
    "quantity": 11
  },
  {
    "date": "07/11/2021",
    "user": "Bob",
    "colour": "green",
    "quantity": 10
  },
  {
    "date": "11/11/2021",
    "user": "Bob",
    "colour": "red",
    "quantity": 9
  }
]
    </script>

    <script>

        // analyse the data 

        // get result for each user (rows)

        // get results for each colour (columns)

        let result = data.map(item => {
            return {
                user : item.user, 
                colour: item.colour, 
                quantity: item.quantity
            }
        }).reduce((runningTotal, item)=>{

            
            if (runningTotal[item.user] == null) {
                runningTotal[item.user] = {};
                runningTotal[item.user][item.colour] = item.quantity;
            } else {
                
                if (runningTotal[item.user][item.colour] == null) {
                    runningTotal[item.user][item.colour] = item.quantity;
                } else {
                    runningTotal[item.user][item.colour] += item.quantity;
                }
            }
            
            return runningTotal;
        }, {})

        console.log(result);
    </script>


</body>
</html>